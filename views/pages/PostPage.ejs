<!DOCTYPE html>
<html lang="en">
<head>  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Post Page</title>
<!--  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    input, textarea { display: block; margin-bottom: 10px; width: 100%; padding: 10px; }
    button { padding: 10px 20px; }
  </style>-->
</head>
<body>

<div class="p-5 bg-primary text-white text-center">
  <h1>Post Page</h1>
  <p>Post</p>
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <div class="container-fluid">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Account</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/post">Post</a>
      </li>    
  </ul>
  </div>
</nav>
<h2>Share Your Story</h2>

<form action="/submit-story" method="POST" onsubmit="return validateStory()">
  <input type="text" name="name" placeholder="Your name (optional)">
  <br>
  <textarea name="story" placeholder="Your story..." rows="8" cols="60" required></textarea>
  <br>
  <p><span id="wordCount">0</span>/500 words</p>
  <button type="submit" id="submitBtn">Submit</button>
</form>

<script>
  const textarea = document.querySelector('textarea[name="story"]');
  const wordCountDisplay = document.getElementById('wordCount');
  const submitBtn = document.getElementById('submitBtn');

  textarea.addEventListener('input', () => {
    const words = textarea.value.trim().split(/\s+/);
    const count = textarea.value.trim() ? words.length : 0;
    wordCountDisplay.textContent = count;

    if (count > 500) {
      submitBtn.disabled = true;
      wordCountDisplay.style.color = 'red';
    } else {
      submitBtn.disabled = false;
      wordCountDisplay.style.color = 'black';
    }
  });

  function validateStory() {
    const story = textarea.value.trim();
    const wordCount = story ? story.split(/\s+/).length : 0;

    if (wordCount === 0) {
      alert("Please write something before submitting!");
      return false;
    }

    if (wordCount > 500) {
      alert("Your story is too long! (Max 500 words)");
      return false;
    }

    return true;
  }

</script>
</body>
</html>
